"use strict";console.log("Model and Collection Script Loaded");var Photo=Backbone.Model.extend({idAttribute:"_id",defaults:{url:"",name:"",position:"",squadNumber:"",clubTeam:""}}),PhotoCollection=Backbone.Collection.extend({model:Photo,url:"http://tiny-pizza-server.herokuapp.com/collections/WHC-Picture-Gallery"});console.log("Thumbnail Grid View Script Loaded");var ThumbnailView=Backbone.View.extend({className:"thumbnail",template:_.template($(".thumbnail-template").text()),events:{click:"showDetailView"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),$(".thumbnails-container").prepend(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},showDetailView:function(){detailViewInstance.remove(),detailViewInstance=new DetailView({model:this.model})}});console.log("Photo Detail View Script Loaded");var DetailView=Backbone.View.extend({className:"detail-view",template:_.template($(".detail-view-template").text()),events:{"click .save-button":"updatePhotoModel","click .delete-button":"deletePhotoModel","click .new-button":"createNewPhoto","click .add-player-tab":"clearPlayerInputValues"},initialize:function(){this.listenTo(this.model,"add",function(a){new ThumbnailView({model:a})}),this.listenTo(this.model,"change",this.render),$(".detail-container").prepend(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);return this.$el.html(a),this},updatePhotoModel:function(){this.model.set({url:this.$el.find(".url-input").val(),name:this.$el.find(".name-input").val(),position:this.$el.find(".position-input").val(),squadNumber:this.$el.find(".squadNumber-input").val(),clubTeam:this.$el.find(".clubTeam-input").val()}),photos.add(this.model),this.model.save().done(function(){})},deletePhotoModel:function(){this.model.destroy(),this.remove(),window.detailViewInstance=new DetailView({model:photos.last()})},clearPlayerInputValues:function(){this.$el.find("img").attr("src","http://placehold.it/334x222"),this.$el.find(".url-input").val(""),this.$el.find(".name-input").val(""),this.$el.find(".position-input").val(""),this.$el.find(".squadNumber-input").val(""),this.$el.find(".clubTeam-input").val(""),$(".player").empty()},createNewPhoto:function(){var a=new Photo;a.set({url:this.$el.find(".createNewPhoto .url-input").val(),name:this.$el.find(".createNewPhoto .name-input").val(),position:this.$el.find(".createNewPhoto .position-input").val(),squadNumber:this.$el.find(".createNewPhoto .squadNumber-input").val(),clubTeam:this.$el.find(".createNewPhoto .clubTeam-input").val()}),photos.add(a),a.save().done(function(){new ThumbnailView({model:a}),new DetailView({model:a})})}});console.log("Create New Instances Script Loaded");var photos=new PhotoCollection,detailViewInstance;photos.fetch().done(function(){photos.models.reverse(),photos.each(function(a){new ThumbnailView({model:a})}),detailViewInstance=new DetailView({model:photos.last()})});